<h1><%= @project.name %></h1>

<p>State: <%= @project.state %></p>

<h3>Comments</h3>
<% @comments.each do |comment| %>
  <div>
    <p>Author: <%= comment.author.email %></p>
    <p><%= comment.content %></p>
  </div>
<% end %>


<%= form_with(model: [@project, @project.comments.build], url: project_comments_path(@project)) do |form| %>
    <div>
      <%= form.label :content %>
      <%= form.text_area :content %>
    </div>
  
    <%= form.submit "Add Comment" %>
  <% end %>

<% if can? :submit, @project %>
  <%= link_to "Submit Project", submit_project_path(@project), method: :post %>
<% end %>

<% if can? :approve, @project %>
  <%= link_to "Approve Project", approve_project_path(@project), method: :post %>
<% end %>

<% if can? :reject, @project %>
  <%= link_to "Reject Project", reject_project_path(@project), method: :post %>
<% end %>

<% if can? :cancel, @project %>
  <%= link_to "Cancel Project", cancel_project_path(@project), method: :post %>
<% end %>